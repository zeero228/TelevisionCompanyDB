-- ????????? ??????? ???????? (Subscribers)
CREATE TABLE Subscribers (
    SubscriberID INT PRIMARY KEY IDENTITY(1,1), -- ?????????? ????????????? ????????, ?????????? ????
    FullName VARCHAR(255) NOT NULL, -- ????? ??'? ????????
    ContactInfo VARCHAR(255), -- ????????? ?????????? (email, ???????)
    IsActive BIT DEFAULT 1, -- ?????? ?????????? (1 - ????????, 0 - ??????????)
    Debt DECIMAL(10, 2) DEFAULT 0.00, -- ?????????????? ????????
    CHECK (Debt >= 0) -- ?????????, ?? ?????????????? ?? ???? ???? ???'?????
);

-- ????????? ??????? ??????? (Services)
CREATE TABLE Services (
    ServiceID INT PRIMARY KEY IDENTITY(1,1), -- ?????????? ????????????? ???????
    ServiceName VARCHAR(255) NOT NULL, -- ????? ??????? (?????????, "??????? ?????")
    ServiceType VARCHAR(50) CHECK (ServiceType IN ('basic', 'extended')), -- ??? ??????? ("basic" ??? "extended")
    Tariff DECIMAL(10, 2) NOT NULL -- ????? ???????
);

-- ????????? ??????? ?????????? (Orders)
CREATE TABLE Orders (
    OrderID INT PRIMARY KEY IDENTITY(1,1), -- ?????????? ????????????? ??????????
    SubscriberID INT NOT NULL, -- ????????????? ????????, ???? ?????? ??????????
    ServiceID INT NOT NULL, -- ????????????? ?????????? ???????
    OrderDate DATE NOT NULL DEFAULT GETDATE(), -- ???? ??????????
    TotalAmount DECIMAL(10, 2) NOT NULL, -- ???????? ???? ?? ?????? ?? ??????????
    FOREIGN KEY (SubscriberID) REFERENCES Subscribers(SubscriberID), -- ????????? ???? ?? ??????? ????????
    FOREIGN KEY (ServiceID) REFERENCES Services(ServiceID) -- ????????? ???? ?? ??????? ???????
);

-- ????????? ??????? ?????? (Payments)
CREATE TABLE Payments (
    PaymentID INT PRIMARY KEY IDENTITY(1,1), -- ?????????? ????????????? ??????
    SubscriberID INT NOT NULL, -- ????????????? ????????, ???? ???????? ??????
    PaymentDate DATE NOT NULL DEFAULT GETDATE(), -- ???? ??????
    Amount DECIMAL(10, 2) NOT NULL, -- ???? ??????
    PaymentStatus VARCHAR(50) CHECK (PaymentStatus IN ('success', 'failed')), -- ?????? ?????? ("success" ??? "failed")
    FOREIGN KEY (SubscriberID) REFERENCES Subscribers(SubscriberID) -- ????????? ???? ?? ??????? ????????
);

-- ????????? ??????? ?????????? (Movies)
CREATE TABLE Movies (
    MovieID INT PRIMARY KEY IDENTITY(1,1), -- ?????????? ????????????? ??????
    Title VARCHAR(255) NOT NULL, -- ????? ??????
    Category VARCHAR(255), -- ????????? ?????? (?????????, "???????", "???????")
    ReleaseDate DATE NOT NULL DEFAULT GETDATE(), -- ???? ??????????? ??????
    PopularityRating INT DEFAULT 0, -- ??????? ???????????? ??????
    CHECK (PopularityRating >= 0) -- ?????????, ?? ??????? ?? ???? ???? ???'?????
);

-- ????????? ??????? ??????????_??????????? (MovieOrders) - ??????-??-????????
CREATE TABLE MovieOrders (
    MovieOrderID INT PRIMARY KEY IDENTITY(1,1), -- ?????????? ????????????? ?????????? ??????
    SubscriberID INT NOT NULL, -- ????????????? ????????, ???? ??????? ?????
    MovieID INT NOT NULL, -- ????????????? ??????????? ??????
    OrderDate DATE NOT NULL DEFAULT GETDATE(), -- ???? ??????????
    Price DECIMAL(10, 2) NOT NULL, -- ???? ?? ???????? ??????
    FOREIGN KEY (SubscriberID) REFERENCES Subscribers(SubscriberID), -- ????????? ???? ?? ??????? ????????
    FOREIGN KEY (MovieID) REFERENCES Movies(MovieID) -- ????????? ???? ?? ??????? ??????????
);

-- ????????? ??????? ???????_????? (TariffPlans)
CREATE TABLE TariffPlans (
    TariffPlanID INT PRIMARY KEY IDENTITY(1,1), -- ?????????? ????????????? ????????? ?????
    TariffName VARCHAR(255) NOT NULL, -- ????? ????????? ?????
    BasePrice DECIMAL(10, 2) NOT NULL -- ?????? ???????? ????????? ?????
);

-- ????????? ??????? ????? (Reports)
CREATE TABLE Reports (
    ReportID INT PRIMARY KEY IDENTITY(1,1), -- ?????????? ????????????? ?????
    ReportType VARCHAR(255) NOT NULL, -- ??? ????? (?????????, "???? ??? ??????")
    ReportDate DATE NOT NULL DEFAULT GETDATE() -- ???? ?????????? ?????
);